{"remainingRequest":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/c/Users/matth/git/cos243/ride-share/src/pages/SignIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/c/Users/matth/git/cos243/ride-share/src/pages/SignIn.vue","mtime":1606526635070},{"path":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/cache-loader/dist/cjs.js","mtime":1605136929726},{"path":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/babel-loader/lib/index.js","mtime":1605643974154},{"path":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/cache-loader/dist/cjs.js","mtime":1605136929726},{"path":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/vue-loader/lib/index.js","mtime":1605643980647}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZW1haWw6ICIiLAogICAgICBwYXNzd29yZDogIiIsCgogICAgICBzbmFja2JhcjogewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIG1zZ2U6ICIiLAogICAgICB9LAogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBsb2dJbigpIHsKICAgICAgdGhpcy4kYXhpb3MKICAgICAgICAucG9zdCgiL2xvZ2luIiwgewogICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgIHRoaXMuc2hvd1NuYWNrYmFyKHJlc3VsdC5kYXRhLm1zZ2UpOwogICAgICAgICAgaWYgKHJlc3VsdC5kYXRhLm9rKSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgibG9nSW4iLCByZXN1bHQuZGF0YS5kZXRhaWxzKTsKCiAgICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYSBkcml2ZXIKICAgICAgICAgICAgdGhpcy4kYXhpb3MKICAgICAgICAgICAgICAucG9zdCgiL2RyaXZlciIsIHsKICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlc3VsdC5kYXRhLmRldGFpbHMuaWQKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC50aGVuKChkcml2ZXJfcmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dTbmFja2Jhcihkcml2ZXJfcmVzdWx0LmRhdGEubXNnZSk7CiAgICAgICAgICAgICAgICBpZiAoZHJpdmVyX3Jlc3VsdC5kYXRhLm9rKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiYmVjb21lRHJpdmVyIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKCgogICAgICAgICAgICAvLyBTZW5kIHRvIGhvbWVwYWdlIAogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJob21lLXBhZ2UiIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHRoaXMuc2hvd1NuYWNrYmFyKGVycikpOwogICAgfSwKCiAgICBzcG9vZkxvZ0luKCkgewogICAgICB0aGlzLnNob3dTbmFja2JhcigiTG9nIGluIFN1Y2Nlc3NmdWwhIFdlbGNvbWUhIik7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgibG9nSW4iLCB7CiAgICAgICAgICAgICAgdXNlcl9pZDogMywKICAgICAgICAgICAgICBmaXJzdE5hbWU6ICJUZXN0X1VzZXIiLAogICAgICAgICAgICAgIGxhc3ROYW1lOiAiVGVzdCIsCiAgICAgICAgICAgICAgZW1haWw6ICJub3BlIiwKICAgICAgICAgICAgfSk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogImhvbWUtcGFnZSIgfSk7CiAgICB9LAoKICAgIHNob3dTbmFja2Jhcihtc2dlKSB7CiAgICAgIHRoaXMuc25hY2tiYXIubXNnZSA9IG1zZ2U7CiAgICAgIHRoaXMuc25hY2tiYXIuc2hvdyA9IHRydWU7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["SignIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"SignIn.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <v-container>\n    <v-row justify=\"center\">\n      <v-col cols=\"12\" sm=\"8\" md=\"6\">\n        <v-card class=\"elevation-12\">\n          <v-toolbar color=\"primary\" dark flat>\n            <v-toolbar-title>Log in</v-toolbar-title>\n          </v-toolbar>\n          <v-card-text>\n            <v-form>\n              <v-text-field\n                v-model=\"email\"\n                label=\"Email\"\n                name=\"email\"\n                prepend-icon=\"mdi-email\"\n                type=\"text\"\n              />\n              <v-text-field\n                v-model=\"password\"\n                id=\"password\"\n                label=\"Password\"\n                name=\"password\"\n                prepend-icon=\"mdi-lock\"\n                type=\"password\"\n              />\n            </v-form>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer />\n            <v-btn v-on:click=\"logIn\" color=\"primary\">Log In</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n    </v-row>\n\n    <v-snackbar v-model=\"snackbar.show\">\n      {{ snackbar.msge }}\n      <v-btn text color=\"primary\" @click=\"snackbar.show = false\">Close</v-btn>\n    </v-snackbar>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n\n      snackbar: {\n        show: false,\n        msge: \"\",\n      },\n    };\n  },\n\n  methods: {\n    logIn() {\n      this.$axios\n        .post(\"/login\", {\n          email: this.email,\n          password: this.password,\n        })\n        .then((result) => {\n          this.showSnackbar(result.data.msge);\n          if (result.data.ok) {\n            this.$store.commit(\"logIn\", result.data.details);\n\n            // Check if user is a driver\n            this.$axios\n              .post(\"/driver\", {\n                user_id: result.data.details.id\n              })\n              .then((driver_result) => {\n                this.showSnackbar(driver_result.data.msge);\n                if (driver_result.data.ok) {\n                  this.$store.commit(\"becomeDriver\");\n                }\n              })\n\n\n            // Send to homepage \n            this.$router.push({ name: \"home-page\" });\n          }\n        })\n        .catch((err) => this.showSnackbar(err));\n    },\n\n    spoofLogIn() {\n      this.showSnackbar(\"Log in Successful! Welcome!\");\n      this.$store.commit(\"logIn\", {\n              user_id: 3,\n              firstName: \"Test_User\",\n              lastName: \"Test\",\n              email: \"nope\",\n            });\n      this.$router.push({ name: \"home-page\" });\n    },\n\n    showSnackbar(msge) {\n      this.snackbar.msge = msge;\n      this.snackbar.show = true;\n    },\n  },\n};\n</script>\n"]}]}