{"remainingRequest":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/babel-loader/lib/index.js!/mnt/c/Users/matth/git/cos243/ride-share/node_modules/cache-loader/dist/cjs.js??ref--0-0!/mnt/c/Users/matth/git/cos243/ride-share/node_modules/vue-loader/lib/index.js??vue-loader-options!/mnt/c/Users/matth/git/cos243/ride-share/src/pages/MyRides.vue?vue&type=script&lang=js&","dependencies":[{"path":"/mnt/c/Users/matth/git/cos243/ride-share/src/pages/MyRides.vue","mtime":1606529499763},{"path":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/cache-loader/dist/cjs.js","mtime":1605136929726},{"path":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/babel-loader/lib/index.js","mtime":1605643974154},{"path":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/cache-loader/dist/cjs.js","mtime":1605136929726},{"path":"/mnt/c/Users/matth/git/cos243/ride-share/node_modules/vue-loader/lib/index.js","mtime":1605643980647}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGNvbXB1dGVkOiB7CiAgICBpc0xvZ2dlZEluOiBmdW5jdGlvbiBpc0xvZ2dlZEluKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5pc0xvZ2dlZEluOwogICAgfSwKICAgIGlzRHJpdmVyOiBmdW5jdGlvbiBpc0RyaXZlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuaXNEcml2ZXI7CiAgICB9CiAgfSwKICBuYW1lOiAiUmlkZXMiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoZWFkZXJzOiBbewogICAgICAgIHRleHQ6ICJEYXRlIiwKICAgICAgICB2YWx1ZTogImRhdGUiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiVGltZSIsCiAgICAgICAgdmFsdWU6ICJ0aW1lIgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIkRpc3RhbmNlIiwKICAgICAgICB2YWx1ZTogImRpc3RhbmNlIgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIkZ1ZWwgUHJpY2UiLAogICAgICAgIHZhbHVlOiAiZnVlbF9wcmljZSIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJGZWUiLAogICAgICAgIHZhbHVlOiAiZmVlIgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIkFjdGlvbiIsCiAgICAgICAgdmFsdWU6ICJhY3Rpb24iCiAgICAgIH1dLAogICAgICByaWRlczogW10sCiAgICAgIHNuYWNrYmFyOiB7CiAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgdGV4dDogIiIKICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuJGF4aW9zLnBvc3QoIi9yaWRlcyIsIHsKICAgICAgcGFzc2VuZ2VyX2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJyZW50QWNjb3VudC5pZAogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMucmlkZXMgPSByZXNwb25zZS5kYXRhLm1hcChmdW5jdGlvbiAocmlkZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICByaWRlX2lkOiByaWRlLnJpZGVfaWQsCiAgICAgICAgICBkYXRlOiByaWRlLnJpZGVzLmRhdGUsCiAgICAgICAgICB0aW1lOiByaWRlLnJpZGVzLnRpbWUsCiAgICAgICAgICBkaXN0YW5jZTogcmlkZS5yaWRlcy5kaXN0YW5jZSwKICAgICAgICAgIGZ1ZWxfcHJpY2U6IHJpZGUucmlkZXMuZnVlbF9wcmljZSwKICAgICAgICAgIGZlZTogcmlkZS5yaWRlcy5mZWUKICAgICAgICB9OwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgLy8gRGlzcGxheSBhIHNuYWNrYmFyIG1lc3NhZ2UuCiAgICBzaG93U25hY2tiYXI6IGZ1bmN0aW9uIHNob3dTbmFja2Jhcih0ZXh0KSB7CiAgICAgIHRoaXMuc25hY2tiYXIudGV4dCA9IHRleHQ7CiAgICAgIHRoaXMuc25hY2tiYXIuc2hvdyA9IHRydWU7CiAgICB9LAogICAgLy8gQ2FsY3VsYXRlIHRoZSBDU1MgY2xhc3MgZm9yIGFuIGl0ZW0KICAgIGl0ZW1DbGFzczogZnVuY3Rpb24gaXRlbUNsYXNzKGl0ZW0pIHsKICAgICAgdmFyIGN1cnJlbnRBY2NvdW50ID0gdGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudEFjY291bnQ7CgogICAgICBpZiAoY3VycmVudEFjY291bnQgJiYgY3VycmVudEFjY291bnQuaWQgPT09IGl0ZW0uaWQpIHsKICAgICAgICByZXR1cm4gImN1cnJlbnRBY2NvdW50IjsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZVJpZGU6IGZ1bmN0aW9uIGRlbGV0ZVJpZGUoaXRlbSkgewogICAgICBjb25zb2xlLmxvZygiVVBEQVRFIiwgSlNPTi5zdHJpbmdpZnkoaXRlbSwgbnVsbCwgMikpOwogICAgICB0aGlzLiRheGlvcy5kZWxldGUoIi9yaWRlcyIsIHsKICAgICAgICBwYXNzZW5nZXJfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRBY2NvdW50LmlkLAogICAgICAgIHJpZGVfaWQ6IGl0ZW0ucmlkZV9pZAogICAgICB9KTsKICAgICAgdGhpcy5zaG93U25hY2tiYXIoIlJpZGUgcmVtb3ZlZC4iKTsKICAgIH0sCiAgICAvLyBVcGRhdGUgYWNjb3VudCBpbmZvcm1hdGlvbi4KICAgIHVwZGF0ZUFjY291bnQ6IGZ1bmN0aW9uIHVwZGF0ZUFjY291bnQoaXRlbSkgewogICAgICBjb25zb2xlLmxvZygiVVBEQVRFIiwgSlNPTi5zdHJpbmdpZnkoaXRlbSwgbnVsbCwgMikpOwogICAgICB0aGlzLnNob3dTbmFja2JhcigiU29ycnksIHVwZGF0ZSBpcyBub3QgeWV0IGltcGxlbWVudGVkLiIpOwogICAgfSwKICAgIC8vIERlbGV0ZSBhbiBhY2NvdW50LgogICAgZGVsZXRlQWNjb3VudDogZnVuY3Rpb24gZGVsZXRlQWNjb3VudChpdGVtKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kYXhpb3MuZGVsZXRlKCIvYWNjb3VudHMvIi5jb25jYXQoaXRlbS5pZCkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEub2spIHsKICAgICAgICAgIC8vIFRoZSBkZWxldGUgb3BlcmF0aW9uIHdvcmtlZCBvbiB0aGUgc2VydmVyOyBkZWxldGUgdGhlIGxvY2FsIGFjY291bnQKICAgICAgICAgIC8vIGJ5IGZpbHRlcmluZyB0aGUgZGVsZXRlZCBhY2NvdW50IGZyb20gdGhlIGxpc3Qgb2YgYWNjb3VudHMuCiAgICAgICAgICBfdGhpczIuYWNjb3VudHMgPSBfdGhpczIuYWNjb3VudHMuZmlsdGVyKGZ1bmN0aW9uIChhY2NvdW50KSB7CiAgICAgICAgICAgIHJldHVybiBhY2NvdW50LmlkICE9PSBpdGVtLmlkOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["MyRides.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-container>\n    <div>\n      <h4 class=\"display-1\">My Rides</h4>\n\n      <v-data-table\n        class=\"elevation-1\"\n        v-bind:headers=\"headers\"\n        v-bind:items=\"rides\"\n      >\n        <template v-slot:item=\"{ item }\">\n          <tr v-bind:class=\"itemClass(item)\">\n            <td>{{ item.date }}</td>\n            <td>{{ item.time }}</td>\n            <td>{{ item.distance }}</td>\n            <td>{{ item.fuel_price }}</td>\n            <td>{{ item.fee }}</td>\n            <td>\n              <v-icon small @click=\"deleteRide(item)\">\n                mdi-delete\n              </v-icon>\n              <v-icon v-if=\"isDriver\" small @click=\"updateAccount(item)\">\n                mdi-steering\n              </v-icon>\n            </td>\n          </tr>\n        </template>\n      </v-data-table>\n\n      <v-snackbar v-model=\"snackbar.show\">\n        {{ snackbar.text }}\n        <v-btn color=\"blue\" text @click=\"snackbar.show = false\">\n          Close\n        </v-btn>\n      </v-snackbar>\n    </div>\n  </v-container>\n</template>\n\n<script>\nexport default {\n\n  computed: {\n    isLoggedIn() {\n      return this.$store.getters.isLoggedIn;\n    },\n    isDriver() {\n      return this.$store.getters.isDriver;\n    },\n  },\n\n  name: \"Rides\",\n\n  data: function() {\n    return {\n      headers: [\n        { text: \"Date\", value: \"date\" },\n        { text: \"Time\", value: \"time\" },\n        { text: \"Distance\", value: \"distance\" },\n        { text: \"Fuel Price\", value: \"fuel_price\" },\n        { text: \"Fee\", value: \"fee\" },\n        { text: \"Action\", value: \"action\" }\n      ],\n      rides: [],\n\n      snackbar: {\n        show: false,\n        text: \"\"\n      }\n    };\n  },\n\n  mounted: function() {\n    this.$axios.post(\"/rides\", {\n        passenger_id: this.$store.state.currentAccount.id\n    })\n    .then(response => {\n      this.rides = response.data.map(ride => ({\n        ride_id: ride.ride_id,\n        date: ride.rides.date,\n        time: ride.rides.time,\n        distance: ride.rides.distance,\n        fuel_price: ride.rides.fuel_price,\n        fee: ride.rides.fee,\n      }));\n    });\n  },\n\n  methods: {\n    // Display a snackbar message.\n    showSnackbar(text) {\n      this.snackbar.text = text;\n      this.snackbar.show = true;\n    },\n\n    // Calculate the CSS class for an item\n    itemClass(item) {\n      const currentAccount = this.$store.state.currentAccount;\n      if (currentAccount && currentAccount.id === item.id) {\n        return \"currentAccount\";\n      }\n    },\n\n    deleteRide(item) {\n      console.log(\"UPDATE\", JSON.stringify(item, null, 2));\n      this.$axios.delete(\"/rides\", {\n        passenger_id: this.$store.state.currentAccount.id,\n        ride_id: item.ride_id,\n      })\n      this.showSnackbar(\"Ride removed.\");\n    },\n\n    // Update account information.\n    updateAccount(item) {\n      console.log(\"UPDATE\", JSON.stringify(item, null, 2));\n      this.showSnackbar(\"Sorry, update is not yet implemented.\");\n    },\n\n    // Delete an account.\n    deleteAccount(item) {\n      this.$axios.delete(`/accounts/${item.id}`).then(response => {\n        if (response.data.ok) {\n          // The delete operation worked on the server; delete the local account\n          // by filtering the deleted account from the list of accounts.\n          this.accounts = this.accounts.filter(\n            account => account.id !== item.id\n          );\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style>\n.currentAccount {\n  background: lightcoral;\n}\n</style>\n"],"sourceRoot":"src/pages"}]}